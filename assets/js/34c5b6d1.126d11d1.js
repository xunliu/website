"use strict";(self.webpackChunkdatastrato_next=self.webpackChunkdatastrato_next||[]).push([[7675],{56302:(e,r,i)=>{i.r(r),i.d(r,{assets:()=>d,contentTitle:()=>n,default:()=>h,frontMatter:()=>s,metadata:()=>a,toc:()=>o});var c=i(97458),t=i(37627);const s={title:"Gravitino Iceberg REST catalog service",slug:"/iceberg-rest-service",keywords:["Iceberg REST catalog"],license:"Copyright 2023 Datastrato Pvt Ltd. This software is licensed under the Apache License version 2."},n=void 0,a={id:"iceberg-rest-service",title:"Gravitino Iceberg REST catalog service",description:"Background",source:"@site/versioned_docs/version-0.3.0/iceberg-rest-service.md",sourceDirName:".",slug:"/iceberg-rest-service",permalink:"/docs/0.3.0/iceberg-rest-service",draft:!1,unlisted:!1,editUrl:"https://github.com/datastrato/datastrato.com/edit/master/docs/iceberg-rest-service.md",tags:[],version:"0.3.0",frontMatter:{title:"Gravitino Iceberg REST catalog service",slug:"/iceberg-rest-service",keywords:["Iceberg REST catalog"],license:"Copyright 2023 Datastrato Pvt Ltd. This software is licensed under the Apache License version 2."},sidebar:"tutorialSidebar",previous:{title:"Lakehouse Iceberg catalog",permalink:"/docs/0.3.0/lakehouse-iceberg-catalog"},next:{title:"Apache Hive catalog",permalink:"/docs/0.3.0/apache-hive-catalog"}},d={},o=[{value:"Background",id:"background",level:2},{value:"Capabilities",id:"capabilities",level:3},{value:"How to start the Gravitino Iceberg REST catalog service",id:"how-to-start-the-gravitino-iceberg-rest-catalog-service",level:2},{value:"Gravitino Iceberg REST catalog service configuration",id:"gravitino-iceberg-rest-catalog-service-configuration",level:3},{value:"Iceberg catalog configuration",id:"iceberg-catalog-configuration",level:3},{value:"Hive catalog configuration",id:"hive-catalog-configuration",level:4},{value:"JDBC catalog configuration",id:"jdbc-catalog-configuration",level:4},{value:"Other Apache Iceberg catalog properties",id:"other-apache-iceberg-catalog-properties",level:3},{value:"HDFS configuration",id:"hdfs-configuration",level:3},{value:"Starting the Gravitino Iceberg REST catalog service",id:"starting-the-gravitino-iceberg-rest-catalog-service",level:2},{value:"Exploring the Gravitino and Apache Iceberg REST catalog service with Apache Spark",id:"exploring-the-gravitino-and-apache-iceberg-rest-catalog-service-with-apache-spark",level:2},{value:"Deploying Apache Spark with Apache Iceberg support",id:"deploying-apache-spark-with-apache-iceberg-support",level:3},{value:"Starting the Apache Spark client with the Apache Iceberg REST catalog",id:"starting-the-apache-spark-client-with-the-apache-iceberg-rest-catalog",level:3},{value:"Exploring Apache Iceberg with Apache Spark SQL",id:"exploring-apache-iceberg-with-apache-spark-sql",level:3}];function l(e){const r={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",h4:"h4",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.a)(),...e.components};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(r.h2,{id:"background",children:"Background"}),"\n",(0,c.jsxs)(r.p,{children:["The Gravitino Iceberg REST Server follows the ",(0,c.jsx)(r.a,{href:"https://github.com/apache/iceberg/blob/main/open-api/rest-catalog-open-api.yaml",children:"Apache Iceberg REST API specification"})," and acts as an Iceberg REST catalog server."]}),"\n",(0,c.jsx)(r.h3,{id:"capabilities",children:"Capabilities"}),"\n",(0,c.jsxs)(r.ul,{children:["\n",(0,c.jsxs)(r.li,{children:["Supports the Apache Iceberg REST API defined in Iceberg 1.3.1, supports all namespace and table interfaces. ",(0,c.jsx)(r.code,{children:"Token"}),", ",(0,c.jsx)(r.code,{children:"ReportMetrics"}),", and ",(0,c.jsx)(r.code,{children:"Config"})," interfaces aren't supported yet."]}),"\n",(0,c.jsxs)(r.li,{children:["Works as a catalog proxy, supporting ",(0,c.jsx)(r.code,{children:"HiveCatalog"})," and ",(0,c.jsx)(r.code,{children:"JDBCCatalog"}),"."]}),"\n",(0,c.jsxs)(r.li,{children:["When writing to HDFS, the Gravitino Iceberg REST catalog service can only operate as the specified HDFS user and\ndoesn't support proxying to other HDFS users. See ",(0,c.jsx)(r.a,{href:"/docs/0.3.0/gravitino-server-config",children:"How to access Apache Hadoop"})," for more details."]}),"\n"]}),"\n",(0,c.jsx)(r.admonition,{type:"info",children:(0,c.jsxs)(r.p,{children:["Builds with Apache Iceberg ",(0,c.jsx)(r.code,{children:"1.3.1"}),". The Apache Iceberg table format version is ",(0,c.jsx)(r.code,{children:"1"})," by default.\nBuilds with Hadoop 2.10.x, there may compatibility issue when accessing Hadoop 3.x clusters."]})}),"\n",(0,c.jsx)(r.h2,{id:"how-to-start-the-gravitino-iceberg-rest-catalog-service",children:"How to start the Gravitino Iceberg REST catalog service"}),"\n",(0,c.jsxs)(r.p,{children:["Deploy the Gravitino server to the ",(0,c.jsx)(r.code,{children:"GRAVITINO_HOME"})," directory. You can find the configuration options in ",(0,c.jsx)(r.a,{href:"/docs/0.3.0/gravitino-server-config",children:(0,c.jsx)(r.code,{children:"$GRAVITINO_HOME/conf/gravitino.conf"})}),"."]}),"\n",(0,c.jsx)(r.h3,{id:"gravitino-iceberg-rest-catalog-service-configuration",children:"Gravitino Iceberg REST catalog service configuration"}),"\n",(0,c.jsxs)(r.table,{children:[(0,c.jsx)(r.thead,{children:(0,c.jsxs)(r.tr,{children:[(0,c.jsx)(r.th,{children:"Configuration item"}),(0,c.jsx)(r.th,{children:"Description"}),(0,c.jsx)(r.th,{children:"Default value"}),(0,c.jsx)(r.th,{children:"Required"}),(0,c.jsx)(r.th,{children:"Since Version"})]})}),(0,c.jsxs)(r.tbody,{children:[(0,c.jsxs)(r.tr,{children:[(0,c.jsx)(r.td,{children:(0,c.jsx)(r.code,{children:"gravitino.auxService.names"})}),(0,c.jsxs)(r.td,{children:["The auxiliary service name of the Gravitino Iceberg REST catalog service, use ",(0,c.jsx)(r.strong,{children:(0,c.jsx)(r.code,{children:"iceberg-rest"})})," for the Gravitino Iceberg REST catalog service."]}),(0,c.jsx)(r.td,{children:"(none)"}),(0,c.jsx)(r.td,{children:"Yes"}),(0,c.jsx)(r.td,{children:"0.2.0"})]}),(0,c.jsxs)(r.tr,{children:[(0,c.jsx)(r.td,{children:(0,c.jsx)(r.code,{children:"gravitino.auxService.iceberg-rest.classpath"})}),(0,c.jsxs)(r.td,{children:["The classpath of the Gravitino Iceberg REST catalog service, includes the directory containing jars and configuration. It supports both absolute paths and relative paths, for example, ",(0,c.jsx)(r.code,{children:"catalogs/lakehouse-iceberg/libs, catalogs/lakehouse-iceberg/conf"})]}),(0,c.jsx)(r.td,{children:"(none)"}),(0,c.jsx)(r.td,{children:"Yes"}),(0,c.jsx)(r.td,{children:"0.2.0"})]}),(0,c.jsxs)(r.tr,{children:[(0,c.jsx)(r.td,{children:(0,c.jsx)(r.code,{children:"gravitino.auxService.iceberg-rest.host"})}),(0,c.jsx)(r.td,{children:"The host of the Gravitino Iceberg REST catalog service."}),(0,c.jsx)(r.td,{children:(0,c.jsx)(r.code,{children:"0.0.0.0"})}),(0,c.jsx)(r.td,{children:"No"}),(0,c.jsx)(r.td,{children:"0.2.0"})]}),(0,c.jsxs)(r.tr,{children:[(0,c.jsx)(r.td,{children:(0,c.jsx)(r.code,{children:"gravitino.auxService.iceberg-rest.httpPort"})}),(0,c.jsx)(r.td,{children:"The port of the Gravitino Iceberg REST catalog service."}),(0,c.jsx)(r.td,{children:(0,c.jsx)(r.code,{children:"8090"})}),(0,c.jsx)(r.td,{children:"Yes"}),(0,c.jsx)(r.td,{children:"0.2.0"})]}),(0,c.jsxs)(r.tr,{children:[(0,c.jsx)(r.td,{children:(0,c.jsx)(r.code,{children:"gravitino.auxService.iceberg-rest.minThreads"})}),(0,c.jsxs)(r.td,{children:["The minimum number of threads in the thread pool used by the Jetty web server. ",(0,c.jsx)(r.code,{children:"minThreads"})," is 8 if the value is less than 8."]}),(0,c.jsx)(r.td,{children:(0,c.jsx)(r.code,{children:"Math.max(Math.min(Runtime.getRuntime().availableProcessors() * 2, 100), 8)"})}),(0,c.jsx)(r.td,{children:"No"}),(0,c.jsx)(r.td,{children:"0.2.0"})]}),(0,c.jsxs)(r.tr,{children:[(0,c.jsx)(r.td,{children:(0,c.jsx)(r.code,{children:"gravitino.auxService.iceberg-rest.maxThreads"})}),(0,c.jsxs)(r.td,{children:["The maximum number of threads in the thread pool used by the Jetty web server. ",(0,c.jsx)(r.code,{children:"maxThreads"})," is 8 if the value is less than 8, and ",(0,c.jsx)(r.code,{children:"maxThreads"})," must be greater than or equal to ",(0,c.jsx)(r.code,{children:"minThreads"}),"."]}),(0,c.jsx)(r.td,{children:(0,c.jsx)(r.code,{children:"Math.max(Runtime.getRuntime().availableProcessors() * 4, 400)"})}),(0,c.jsx)(r.td,{children:"No"}),(0,c.jsx)(r.td,{children:"0.2.0"})]}),(0,c.jsxs)(r.tr,{children:[(0,c.jsx)(r.td,{children:(0,c.jsx)(r.code,{children:"gravitino.auxService.iceberg-rest.threadPoolWorkQueueSize"})}),(0,c.jsx)(r.td,{children:"The size of the queue in the thread pool used by Gravitino Iceberg REST catalog service."}),(0,c.jsx)(r.td,{children:(0,c.jsx)(r.code,{children:"100"})}),(0,c.jsx)(r.td,{children:"No"}),(0,c.jsx)(r.td,{children:"0.2.0"})]}),(0,c.jsxs)(r.tr,{children:[(0,c.jsx)(r.td,{children:(0,c.jsx)(r.code,{children:"gravitino.auxService.iceberg-rest.stopTimeout"})}),(0,c.jsxs)(r.td,{children:["The amount of time in ms for the Gravitino Iceberg REST catalog service to stop gracefully. For more information see ",(0,c.jsx)(r.code,{children:"org.eclipse.jetty.server.Server#setStopTimeout"}),"."]}),(0,c.jsx)(r.td,{children:(0,c.jsx)(r.code,{children:"30000"})}),(0,c.jsx)(r.td,{children:"No"}),(0,c.jsx)(r.td,{children:"0.2.0"})]}),(0,c.jsxs)(r.tr,{children:[(0,c.jsx)(r.td,{children:(0,c.jsx)(r.code,{children:"gravitino.auxService.iceberg-rest.idleTimeout"})}),(0,c.jsx)(r.td,{children:"The timeout in ms of idle connections."}),(0,c.jsx)(r.td,{children:(0,c.jsx)(r.code,{children:"30000"})}),(0,c.jsx)(r.td,{children:"No"}),(0,c.jsx)(r.td,{children:"0.2.0"})]}),(0,c.jsxs)(r.tr,{children:[(0,c.jsx)(r.td,{children:(0,c.jsx)(r.code,{children:"gravitino.auxService.iceberg-rest.requestHeaderSize"})}),(0,c.jsx)(r.td,{children:"The maximum size of an HTTP request."}),(0,c.jsx)(r.td,{children:(0,c.jsx)(r.code,{children:"131072"})}),(0,c.jsx)(r.td,{children:"No"}),(0,c.jsx)(r.td,{children:"0.2.0"})]}),(0,c.jsxs)(r.tr,{children:[(0,c.jsx)(r.td,{children:(0,c.jsx)(r.code,{children:"gravitino.auxService.iceberg-rest.responseHeaderSize"})}),(0,c.jsx)(r.td,{children:"The maximum size of an HTTP response."}),(0,c.jsx)(r.td,{children:(0,c.jsx)(r.code,{children:"131072"})}),(0,c.jsx)(r.td,{children:"No"}),(0,c.jsx)(r.td,{children:"0.2.0"})]})]})]}),"\n",(0,c.jsx)(r.admonition,{type:"caution",children:(0,c.jsxs)(r.p,{children:["You must set ",(0,c.jsx)(r.code,{children:"gravitino.auxService.iceberg-rest.httpPort"})," explicitly, like ",(0,c.jsx)(r.code,{children:"9001"}),"."]})}),"\n",(0,c.jsx)(r.h3,{id:"iceberg-catalog-configuration",children:"Iceberg catalog configuration"}),"\n",(0,c.jsx)(r.admonition,{type:"info",children:(0,c.jsx)(r.p,{children:"The Gravitino Iceberg REST catalog service using memory catalog for default. You can specify Hive or JDBC catalog for production environments."})}),"\n",(0,c.jsx)(r.h4,{id:"hive-catalog-configuration",children:"Hive catalog configuration"}),"\n",(0,c.jsxs)(r.table,{children:[(0,c.jsx)(r.thead,{children:(0,c.jsxs)(r.tr,{children:[(0,c.jsx)(r.th,{children:"Configuration item"}),(0,c.jsx)(r.th,{children:"Description"}),(0,c.jsx)(r.th,{children:"Default value"}),(0,c.jsx)(r.th,{children:"Required"}),(0,c.jsx)(r.th,{children:"Since Version"})]})}),(0,c.jsxs)(r.tbody,{children:[(0,c.jsxs)(r.tr,{children:[(0,c.jsx)(r.td,{children:(0,c.jsx)(r.code,{children:"gravitino.auxService.iceberg-rest.catalog-backend"})}),(0,c.jsxs)(r.td,{children:["The Catalog backend of Gravitino Iceberg REST catalog service, use the value ",(0,c.jsx)(r.strong,{children:(0,c.jsx)(r.code,{children:"hive"})})," for a Hive catalog."]}),(0,c.jsx)(r.td,{children:(0,c.jsx)(r.code,{children:"memory"})}),(0,c.jsx)(r.td,{children:"Yes"}),(0,c.jsx)(r.td,{children:"0.2.0"})]}),(0,c.jsxs)(r.tr,{children:[(0,c.jsx)(r.td,{children:(0,c.jsx)(r.code,{children:"gravitino.auxService.iceberg-rest.uri"})}),(0,c.jsxs)(r.td,{children:["The Hive metadata address, such as ",(0,c.jsx)(r.code,{children:"thrift://127.0.0.1:9083"}),"."]}),(0,c.jsx)(r.td,{children:"(none)"}),(0,c.jsx)(r.td,{children:"Yes"}),(0,c.jsx)(r.td,{children:"0.2.0"})]}),(0,c.jsxs)(r.tr,{children:[(0,c.jsx)(r.td,{children:(0,c.jsx)(r.code,{children:"gravitino.auxService.iceberg-rest.warehouse "})}),(0,c.jsxs)(r.td,{children:["The warehouse directory of the Hive catalog, such as ",(0,c.jsx)(r.code,{children:"/user/hive/warehouse-hive/"}),"."]}),(0,c.jsx)(r.td,{children:"(none)"}),(0,c.jsx)(r.td,{children:"Yes"}),(0,c.jsx)(r.td,{children:"0.2.0"})]})]})]}),"\n",(0,c.jsx)(r.h4,{id:"jdbc-catalog-configuration",children:"JDBC catalog configuration"}),"\n",(0,c.jsxs)(r.table,{children:[(0,c.jsx)(r.thead,{children:(0,c.jsxs)(r.tr,{children:[(0,c.jsx)(r.th,{children:"Configuration item"}),(0,c.jsx)(r.th,{children:"Description"}),(0,c.jsx)(r.th,{children:"Default value"}),(0,c.jsx)(r.th,{children:"Required"}),(0,c.jsx)(r.th,{children:"Since Version"})]})}),(0,c.jsxs)(r.tbody,{children:[(0,c.jsxs)(r.tr,{children:[(0,c.jsx)(r.td,{children:(0,c.jsx)(r.code,{children:"gravitino.auxService.iceberg-rest.catalog-backend"})}),(0,c.jsxs)(r.td,{children:["The Catalog backend of Gravitino Iceberg REST catalog service, use the value ",(0,c.jsx)(r.strong,{children:(0,c.jsx)(r.code,{children:"jdbc"})})," for a JDBC catalog."]}),(0,c.jsx)(r.td,{children:(0,c.jsx)(r.code,{children:"memory"})}),(0,c.jsx)(r.td,{children:"Yes"}),(0,c.jsx)(r.td,{children:"0.2.0"})]}),(0,c.jsxs)(r.tr,{children:[(0,c.jsx)(r.td,{children:(0,c.jsx)(r.code,{children:"gravitino.auxService.iceberg-rest.uri"})}),(0,c.jsxs)(r.td,{children:["The JDBC connection address, such as ",(0,c.jsx)(r.code,{children:"jdbc:postgresql://127.0.0.1:5432"})," for Postgres, or ",(0,c.jsx)(r.code,{children:"jdbc:mysql://127.0.0.1:3306/"})," for mysql."]}),(0,c.jsx)(r.td,{children:"(none)"}),(0,c.jsx)(r.td,{children:"Yes"}),(0,c.jsx)(r.td,{children:"0.2.0"})]}),(0,c.jsxs)(r.tr,{children:[(0,c.jsx)(r.td,{children:(0,c.jsx)(r.code,{children:"gravitino.auxService.iceberg-rest.warehouse "})}),(0,c.jsxs)(r.td,{children:["The warehouse directory of JDBC catalog, set HDFS prefix if using HDFS, such as ",(0,c.jsx)(r.code,{children:"hdfs://127.0.0.1:9000/user/hive/warehouse-jdbc"})]}),(0,c.jsx)(r.td,{children:"(none)"}),(0,c.jsx)(r.td,{children:"Yes"}),(0,c.jsx)(r.td,{children:"0.2.0"})]}),(0,c.jsxs)(r.tr,{children:[(0,c.jsx)(r.td,{children:(0,c.jsx)(r.code,{children:"gravitino.auxService.iceberg-rest.jdbc.user"})}),(0,c.jsx)(r.td,{children:"The username of the JDBC connection."}),(0,c.jsx)(r.td,{children:"(none)"}),(0,c.jsx)(r.td,{children:"Yes"}),(0,c.jsx)(r.td,{children:"0.2.0"})]}),(0,c.jsxs)(r.tr,{children:[(0,c.jsx)(r.td,{children:(0,c.jsx)(r.code,{children:"gravitino.auxService.iceberg-rest.jdbc.password"})}),(0,c.jsx)(r.td,{children:"The password of the JDBC connection."}),(0,c.jsx)(r.td,{children:"(none)"}),(0,c.jsx)(r.td,{children:"Yes"}),(0,c.jsx)(r.td,{children:"0.2.0"})]}),(0,c.jsxs)(r.tr,{children:[(0,c.jsx)(r.td,{children:(0,c.jsx)(r.code,{children:"gravitino.auxService.iceberg-rest.jdbc-initialize"})}),(0,c.jsx)(r.td,{children:"Whether to initialize the meta tables when creating the JDBC catalog."}),(0,c.jsx)(r.td,{children:(0,c.jsx)(r.code,{children:"true"})}),(0,c.jsx)(r.td,{children:"No"}),(0,c.jsx)(r.td,{children:"0.2.0"})]}),(0,c.jsxs)(r.tr,{children:[(0,c.jsx)(r.td,{children:(0,c.jsx)(r.code,{children:"gravitino.auxService.iceberg-rest.jdbc-driver"})}),(0,c.jsxs)(r.td,{children:[(0,c.jsx)(r.code,{children:"com.mysql.jdbc.Driver"})," or ",(0,c.jsx)(r.code,{children:"com.mysql.cj.jdbc.Driver"})," for MySQL, ",(0,c.jsx)(r.code,{children:"org.postgresql.Driver"})," for PostgreSQL."]}),(0,c.jsx)(r.td,{children:"(none)"}),(0,c.jsx)(r.td,{children:"Yes"}),(0,c.jsx)(r.td,{children:"0.3.0"})]})]})]}),"\n",(0,c.jsx)(r.admonition,{type:"caution",children:(0,c.jsxs)(r.p,{children:["You must download the corresponding JDBC driver to the ",(0,c.jsx)(r.code,{children:"catalogs/lakehouse-iceberg/libs"})," directory."]})}),"\n",(0,c.jsx)(r.admonition,{type:"info",children:(0,c.jsxs)(r.p,{children:[(0,c.jsx)(r.code,{children:"gravitino.auxService.iceberg-rest.jdbc-driver"})," isn't required unless Gravitino manages multi JDBC drivers."]})}),"\n",(0,c.jsx)(r.h3,{id:"other-apache-iceberg-catalog-properties",children:"Other Apache Iceberg catalog properties"}),"\n",(0,c.jsxs)(r.p,{children:["You can add other properties defined in ",(0,c.jsx)(r.a,{href:"https://iceberg.apache.org/docs/1.3.1/configuration/",children:"Iceberg table properties"}),".\nThe ",(0,c.jsx)(r.code,{children:"clients"})," property for example:"]}),"\n",(0,c.jsxs)(r.table,{children:[(0,c.jsx)(r.thead,{children:(0,c.jsxs)(r.tr,{children:[(0,c.jsx)(r.th,{children:"Configuration item"}),(0,c.jsx)(r.th,{children:"Description"}),(0,c.jsx)(r.th,{children:"Default value"}),(0,c.jsx)(r.th,{children:"Required"})]})}),(0,c.jsx)(r.tbody,{children:(0,c.jsxs)(r.tr,{children:[(0,c.jsx)(r.td,{children:(0,c.jsx)(r.code,{children:"gravitino.auxService.iceberg-rest.clients"})}),(0,c.jsx)(r.td,{children:"The client pool size of the catalog."}),(0,c.jsx)(r.td,{children:(0,c.jsx)(r.code,{children:"2"})}),(0,c.jsx)(r.td,{children:"No"})]})})]}),"\n",(0,c.jsx)(r.admonition,{type:"info",children:(0,c.jsxs)(r.p,{children:[(0,c.jsx)(r.code,{children:"catalog-impl"})," has no effect."]})}),"\n",(0,c.jsx)(r.h3,{id:"hdfs-configuration",children:"HDFS configuration"}),"\n",(0,c.jsxs)(r.p,{children:["The Gravitino Iceberg REST catalog service adds the HDFS configuration files, ",(0,c.jsx)(r.code,{children:"core-site.xml"})," and ",(0,c.jsx)(r.code,{children:"hdfs-site.xml"})," from the directory defined by ",(0,c.jsx)(r.code,{children:"gravitino.auxService.iceberg-rest.classpath"}),", for example, ",(0,c.jsx)(r.code,{children:"catalogs/lakehouse-iceberg/conf"}),", to the classpath."]}),"\n",(0,c.jsx)(r.h2,{id:"starting-the-gravitino-iceberg-rest-catalog-service",children:"Starting the Gravitino Iceberg REST catalog service"}),"\n",(0,c.jsx)(r.p,{children:"Starting the Gravitino Iceberg REST catalog service:"}),"\n",(0,c.jsx)(r.pre,{children:(0,c.jsx)(r.code,{className:"language-shell",children:"./bin/gravitino.sh start\n"})}),"\n",(0,c.jsx)(r.p,{children:"How to find out whether the Gravitino Iceberg REST catalog service has started:"}),"\n",(0,c.jsx)(r.pre,{children:(0,c.jsx)(r.code,{className:"language-shell",children:"curl  http://127.0.0.1:9001/iceberg/application.wadl\n"})}),"\n",(0,c.jsx)(r.h2,{id:"exploring-the-gravitino-and-apache-iceberg-rest-catalog-service-with-apache-spark",children:"Exploring the Gravitino and Apache Iceberg REST catalog service with Apache Spark"}),"\n",(0,c.jsx)(r.h3,{id:"deploying-apache-spark-with-apache-iceberg-support",children:"Deploying Apache Spark with Apache Iceberg support"}),"\n",(0,c.jsxs)(r.p,{children:["Follow the ",(0,c.jsx)(r.a,{href:"https://iceberg.apache.org/docs/latest/getting-started/",children:"Spark Iceberg start guide"})," to set up Apache Spark's and Apache Iceberg's environment. Please keep the Apache Spark version consistent with the ",(0,c.jsx)(r.code,{children:"spark-iceberg-runtime"})," version."]}),"\n",(0,c.jsx)(r.h3,{id:"starting-the-apache-spark-client-with-the-apache-iceberg-rest-catalog",children:"Starting the Apache Spark client with the Apache Iceberg REST catalog"}),"\n",(0,c.jsxs)(r.table,{children:[(0,c.jsx)(r.thead,{children:(0,c.jsxs)(r.tr,{children:[(0,c.jsx)(r.th,{children:"Configuration item"}),(0,c.jsx)(r.th,{children:"Description"})]})}),(0,c.jsxs)(r.tbody,{children:[(0,c.jsxs)(r.tr,{children:[(0,c.jsx)(r.td,{children:(0,c.jsx)(r.code,{children:"spark.sql.catalog.${catalog-name}.type"})}),(0,c.jsxs)(r.td,{children:["The Spark catalog type, should set to ",(0,c.jsx)(r.code,{children:"rest"}),"."]})]}),(0,c.jsxs)(r.tr,{children:[(0,c.jsx)(r.td,{children:(0,c.jsx)(r.code,{children:"spark.sql.catalog.${catalog-name}.uri"})}),(0,c.jsxs)(r.td,{children:["Spark Iceberg REST catalog URI, such as ",(0,c.jsx)(r.code,{children:"http://127.0.0.1:9001/iceberg/"}),"."]})]})]})]}),"\n",(0,c.jsx)(r.p,{children:"For example:"}),"\n",(0,c.jsx)(r.pre,{children:(0,c.jsx)(r.code,{className:"language-shell",children:"./bin/spark-shell -v \\\n--conf spark.sql.extensions=org.apache.iceberg.spark.extensions.IcebergSparkSessionExtensions \\\n--conf spark.sql.catalog.rest=org.apache.iceberg.spark.SparkCatalog  \\\n--conf spark.sql.catalog.rest.type=rest  \\\n--conf spark.sql.catalog.rest.uri=http://127.0.0.1:9001/iceberg/\n"})}),"\n",(0,c.jsx)(r.h3,{id:"exploring-apache-iceberg-with-apache-spark-sql",children:"Exploring Apache Iceberg with Apache Spark SQL"}),"\n",(0,c.jsx)(r.pre,{children:(0,c.jsx)(r.code,{className:"language-sql",children:"// First change to use the `rest` catalog\nUSE rest;\nCREATE DATABASE IF NOT EXISTS dml;\nCREATE TABLE dml.test (id bigint COMMENT 'unique id') using iceberg\nDESCRIBE TABLE EXTENDED dml.test;\nINSERT INTO dml.test VALUES (1), (2);\nSELECT * FROM dml.test\n"})})]})}function h(e={}){const{wrapper:r}={...(0,t.a)(),...e.components};return r?(0,c.jsx)(r,{...e,children:(0,c.jsx)(l,{...e})}):l(e)}},37627:(e,r,i)=>{i.d(r,{Z:()=>a,a:()=>n});var c=i(52983);const t={},s=c.createContext(t);function n(e){const r=c.useContext(s);return c.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function a(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:n(e.components),c.createElement(s.Provider,{value:r},e.children)}}}]);