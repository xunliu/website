"use strict";(self.webpackChunkdatastrato_next=self.webpackChunkdatastrato_next||[]).push([[8236],{47508:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>i,contentTitle:()=>r,default:()=>m,frontMatter:()=>s,metadata:()=>l,toc:()=>d});var a=t(97458),o=t(37627);const s={title:"How to use the playground",slug:"/how-to-use-the-playground",keyword:"playground",license:"Copyright 2023 Datastrato Pvt Ltd. This software is licensed under the Apache License version 2."},r=void 0,l={id:"how-to-use-the-playground",title:"How to use the playground",description:"Playground introduction",source:"@site/docs/how-to-use-the-playground.md",sourceDirName:".",slug:"/how-to-use-the-playground",permalink:"/docs/next/how-to-use-the-playground",draft:!1,unlisted:!1,editUrl:"https://github.com/datastrato/datastrato.com/edit/master/docs/how-to-use-the-playground.md",tags:[],version:"current",frontMatter:{title:"How to use the playground",slug:"/how-to-use-the-playground",keyword:"playground",license:"Copyright 2023 Datastrato Pvt Ltd. This software is licensed under the Apache License version 2."},sidebar:"tutorialSidebar",previous:{title:"Getting started with Gravitino",permalink:"/docs/next/getting-started"},next:{title:"Manage metadata using Gravitino",permalink:"/docs/next/manage-metadata-using-gravitino"}},i={},d=[{value:"Playground introduction",id:"playground-introduction",level:2},{value:"Prerequisite",id:"prerequisite",level:2},{value:"Start playground",id:"start-playground",level:2},{value:"Experience Gravitino with Trino SQL",id:"experience-gravitino-with-trino-sql",level:2},{value:"Example",id:"example",level:2},{value:"Simple queries",id:"simple-queries",level:3},{value:"Cross-catalog queries",id:"cross-catalog-queries",level:3}];function c(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",...(0,o.a)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.h2,{id:"playground-introduction",children:"Playground introduction"}),"\n",(0,a.jsxs)(n.p,{children:["Playground is a complete Gravitino Docker runtime environment with ",(0,a.jsx)(n.code,{children:"Hive"}),", ",(0,a.jsx)(n.code,{children:"Hdfs"}),", ",(0,a.jsx)(n.code,{children:"Trino"}),", ",(0,a.jsx)(n.code,{children:"MySQL"}),", ",(0,a.jsx)(n.code,{children:"PostgreSQL"}),", and ",(0,a.jsx)(n.code,{children:"Gravitino"})," server."]}),"\n",(0,a.jsx)(n.p,{children:"Depending on your network, the startup may take 3-5 minutes."}),"\n",(0,a.jsxs)(n.p,{children:["Once the playground environment has started, you can open ",(0,a.jsx)(n.a,{href:"http://localhost:8090",children:"http://localhost:8090"})," to access the Gravitino Web UI."]}),"\n",(0,a.jsx)(n.h2,{id:"prerequisite",children:"Prerequisite"}),"\n",(0,a.jsx)(n.p,{children:"You should install git and docker-compose."}),"\n",(0,a.jsx)(n.h2,{id:"start-playground",children:"Start playground"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:"git clone git@github.com:datastrato/gravitino-playground.git\ncd gravitino-playground\n./launch-playground.sh\n"})}),"\n",(0,a.jsx)(n.h2,{id:"experience-gravitino-with-trino-sql",children:"Experience Gravitino with Trino SQL"}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsx)(n.li,{children:"Login to Gravitino playground Trino Docker container using the following command."}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:"docker exec -it playground-trino bash\n"})}),"\n",(0,a.jsxs)(n.ol,{start:"2",children:["\n",(0,a.jsx)(n.li,{children:"Open Trino CLI in the container."}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:"trino@d2bbfccc7432:/$ trino\n"})}),"\n",(0,a.jsx)(n.h2,{id:"example",children:"Example"}),"\n",(0,a.jsx)(n.h3,{id:"simple-queries",children:"Simple queries"}),"\n",(0,a.jsx)(n.p,{children:"Use simple queries to test in the Trino CLI."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-SQL",children:'SHOW CATALOGS;\n\nCREATE SCHEMA "metalake_demo.catalog_demo".db1\n  WITH (location = \'hdfs://hive:9000/user/hive/warehouse/db1.db\');\n\nSHOW CREATE SCHEMA "metalake_demo.catalog_demo".db1;\n\nCREATE TABLE "metalake_demo.catalog_demo".db1.table_001\n(\n  name varchar,\n  salary varchar\n)\nWITH (\n  format = \'TEXTFILE\'\n);\n\nINSERT INTO "metalake_demo.catalog_demo".db1.table_001 (name, salary) VALUES (\'sam\', \'11\');\n\nSELECT * FROM "metalake_demo.catalog_demo".db1.table_001;\n\nSHOW SCHEMAS from "metalake_demo.catalog_demo";\n\nDESCRIBE "metalake_demo.catalog_demo".db1.table_001;\n\nSHOW TABLES from "metalake_demo.catalog_demo".db1;\n'})}),"\n",(0,a.jsx)(n.h3,{id:"cross-catalog-queries",children:"Cross-catalog queries"}),"\n",(0,a.jsx)(n.p,{children:"In companies, there may be different departments using different data stacks.\nIn this example, HR department uses Apache Hive to store its data.\nSales department uses PostgreSQL to store its data.\nThis example has generated some data for two departments.\nYou can query some interesting results with Gravitino."}),"\n",(0,a.jsx)(n.p,{children:"If you want to know which employee has the largest sales amount.\nYou can run the SQL."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-SQL",children:'WITH totalsales AS (\n  SELECT\n    employee_id,\n    SUM(total_amount) AS sales_amount\n  FROM "metalake_demo.catalog_demo".sales.sales\n  GROUP BY\n    employee_id\n), rankedemployees AS (\n  SELECT\n    employee_id,\n    sales_amount,\n    RANK() OVER (ORDER BY sales_amount DESC) AS sales_rank\n  FROM totalsales\n)\nSELECT\n  e.employee_id,\n  given_name,\n  family_name,\n  job_title,\n  sales_amount\nFROM rankedemployees AS r\nJOIN "metalake_demo.catalog_pg1".hr.employees AS e\n  ON r.employee_id = e.employee_id\nWHERE\n  sales_rank = 1;\n'})}),"\n",(0,a.jsx)(n.p,{children:"If you want to know top 10 customers who bought the most by state.\nYou run the SQL."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-SQL",children:'WITH customersales AS (\n    SELECT\n        "metalake_demo.catalog_demo".sales.customers.customer_id,\n        customer_name,\n        customer_email,\n        location AS state,\n        SUM(total_amount) AS total_spent\n    FROM "metalake_demo.catalog_demo".sales.sales\n             JOIN "metalake_demo.catalog_demo".sales.customers\n                  ON "metalake_demo.catalog_demo".sales.sales.customer_id = "metalake_demo.catalog_demo".sales.customers.customer_id\n             JOIN "metalake_demo.catalog_demo".sales.stores\n                  ON "metalake_demo.catalog_demo".sales.sales.store_id = "metalake_demo.catalog_demo".sales.stores.store_id\n    GROUP BY\n        "metalake_demo.catalog_demo".sales.customers.customer_id,\n        customer_name,\n        customer_email,\n        location\n), rankedcustomersales AS (\n    SELECT\n        customer_id,\n        customer_name,\n        customer_email,\n        state,\n        total_spent,\n        RANK() OVER (PARTITION BY state ORDER BY total_spent DESC) AS customer_rank\n    FROM customersales\n)\nSELECT\n    customer_id,\n    customer_name,\n    customer_email,\n    state,\n    total_spent\nFROM rankedcustomersales\nWHERE\n    customer_rank <= 10\nORDER BY\n    state,\n    customer_rank;\n'})}),"\n",(0,a.jsx)(n.p,{children:"If you want to know that employees average performance rating and total sales.\nYou run the SQL."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-SQL",children:'set session allow_pushdown_into_connectors=false;\nWITH employeeperformance AS (\n  SELECT\n    employee_id,\n    AVG(rating) AS average_rating\n  FROM "metalake_demo.catalog_pg1".hr.employee_performance\n  GROUP BY\n    employee_id\n), employeesales AS (\n  SELECT\n    employee_id,\n    SUM(total_amount) AS total_sales\n  FROM "metalake_demo.catalog_demo".sales.sales\n  GROUP BY\n    employee_id\n)\nSELECT\n  e.employee_id,\n  average_rating,\n  total_sales\nFROM employeeperformance AS e\nJOIN employeesales AS s\n  ON e.employee_id = s.employee_id;\n'})})]})}function m(e={}){const{wrapper:n}={...(0,o.a)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(c,{...e})}):c(e)}},37627:(e,n,t)=>{t.d(n,{Z:()=>l,a:()=>r});var a=t(52983);const o={},s=a.createContext(o);function r(e){const n=a.useContext(s);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:r(e.components),a.createElement(s.Provider,{value:n},e.children)}}}]);