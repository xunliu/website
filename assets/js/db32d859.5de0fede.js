"use strict";(self.webpackChunkdatastrato_next=self.webpackChunkdatastrato_next||[]).push([[6653],{27119:(e,t,s)=>{s.r(t),s.d(t,{assets:()=>h,contentTitle:()=>d,default:()=>a,frontMatter:()=>i,metadata:()=>c,toc:()=>o});var r=s(97458),n=s(37627);const i={title:"Security",slug:"/security",keyword:"security",license:"Copyright 2023 Datastrato Pvt Ltd. This software is licensed under the Apache License version 2."},d=void 0,c={id:"security",title:"Security",description:"Authentication",source:"@site/docs/security.md",sourceDirName:".",slug:"/security",permalink:"/docs/next/security",draft:!1,unlisted:!1,editUrl:"https://github.com/datastrato/datastrato.com/edit/master/docs/security.md",tags:[],version:"current",frontMatter:{title:"Security",slug:"/security",keyword:"security",license:"Copyright 2023 Datastrato Pvt Ltd. This software is licensed under the Apache License version 2."},sidebar:"tutorialSidebar",previous:{title:"Gravitino configuration",permalink:"/docs/next/gravitino-server-config"},next:{title:"Gravitino metrics",permalink:"/docs/next/metrics"}},h={},o=[{value:"Authentication",id:"authentication",level:2},{value:"Simple mode",id:"simple-mode",level:3},{value:"OAuth mode",id:"oauth-mode",level:3},{value:"Server configuration",id:"server-configuration",level:3},{value:"Example",id:"example",level:3},{value:"HTTPS",id:"https",level:2},{value:"Gravitino server&#39;s configuration",id:"gravitino-servers-configuration",level:3},{value:"Iceberg REST service&#39;s configuration",id:"iceberg-rest-services-configuration",level:3},{value:"Example",id:"example-1",level:3}];function l(e){const t={a:"a",code:"code",h2:"h2",h3:"h3",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,n.a)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.h2,{id:"authentication",children:"Authentication"}),"\n",(0,r.jsx)(t.p,{children:"Gravitino supports two kinds of authentication mechanisms: simple and OAuth."}),"\n",(0,r.jsx)(t.h3,{id:"simple-mode",children:"Simple mode"}),"\n",(0,r.jsx)(t.p,{children:"Simple mode is the default authentication option."}),"\n",(0,r.jsxs)(t.p,{children:["Simple mode allows the client to use the environment variable ",(0,r.jsx)(t.code,{children:"GRAVITINO_USER"})," as the user."]}),"\n",(0,r.jsxs)(t.p,{children:["If the environment variable ",(0,r.jsx)(t.code,{children:"GRAVITINO_USER"})," isn't set, the client uses the user of the machine that sends requests."]}),"\n",(0,r.jsxs)(t.p,{children:["For the client side, users can enable ",(0,r.jsx)(t.code,{children:"simple"})," mode by the following code:"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-java",children:"GravitinoClient client = GravitinoClient.builder(uri)\n    .withSimpleAuth()\n    .build();\n"})}),"\n",(0,r.jsx)(t.h3,{id:"oauth-mode",children:"OAuth mode"}),"\n",(0,r.jsx)(t.p,{children:"Gravitino only supports external OAuth 2.0 servers."}),"\n",(0,r.jsx)(t.p,{children:"First, users need to guarantee that the external correctly configured OAuth 2.0 server supports Bearer JWT."}),"\n",(0,r.jsxs)(t.p,{children:["Then, on the server side, users should set ",(0,r.jsx)(t.code,{children:"gravitino.authenticator"})," as ",(0,r.jsx)(t.code,{children:"oauth"})," and give\n",(0,r.jsx)(t.code,{children:"gravitino.authenticator.oauth.defaultSignKey"}),", ",(0,r.jsx)(t.code,{children:"gravitino.authenticator.oauth.serverUri"})," and\n",(0,r.jsx)(t.code,{children:"gravitino.authenticator.oauth.tokenPath"}),"  a proper value."]}),"\n",(0,r.jsxs)(t.p,{children:["Next, for the client side, users can enable ",(0,r.jsx)(t.code,{children:"OAuth"})," mode by the following code:"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-java",children:'DefaultOAuth2TokenProvider authDataProvider = DefaultOAuth2TokenProvider.builder()\n    .withUri("oauth server uri")\n    .withCredential("yy:xx")\n    .withPath("oauth/token")\n    .withScope("test")\n    .build();\n\nGravitinoClient client = GravitinoClient.builder(uri)\n    .withOAuth(authDataProvider)\n    .build();\n'})}),"\n",(0,r.jsx)(t.h3,{id:"server-configuration",children:"Server configuration"}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Configuration item"}),(0,r.jsx)(t.th,{children:"Description"}),(0,r.jsx)(t.th,{children:"Default value"}),(0,r.jsx)(t.th,{children:"Required"}),(0,r.jsx)(t.th,{children:"Since version"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"gravitino.authenticator"})}),(0,r.jsxs)(t.td,{children:["The authenticator which Gravitino uses, setting as ",(0,r.jsx)(t.code,{children:"simple"})," or ",(0,r.jsx)(t.code,{children:"oauth"}),"."]}),(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"simple"})}),(0,r.jsx)(t.td,{children:"Yes"}),(0,r.jsx)(t.td,{children:"0.3.0"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"gravitino.authenticator.oauth.serviceAudience"})}),(0,r.jsx)(t.td,{children:"The audience name when Gravitino uses OAuth as the authenticator."}),(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"GravitinoServer"})}),(0,r.jsxs)(t.td,{children:["Yes if use ",(0,r.jsx)(t.code,{children:"oauth"})," as the authenticator"]}),(0,r.jsx)(t.td,{children:"0.3.0"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"gravitino.authenticator.oauth.allowSkewSecs"})}),(0,r.jsx)(t.td,{children:"The JWT allows skew seconds when Gravitino uses OAuth as the authenticator."}),(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"0"})}),(0,r.jsxs)(t.td,{children:["Yes if use ",(0,r.jsx)(t.code,{children:"oauth"})," as the authenticator"]}),(0,r.jsx)(t.td,{children:"0.3.0"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"gravitino.authenticator.oauth.defaultSignKey"})}),(0,r.jsx)(t.td,{children:"The signing key of JWT when Gravitino uses OAuth as the authenticator."}),(0,r.jsx)(t.td,{children:"(none)"}),(0,r.jsxs)(t.td,{children:["Yes if use ",(0,r.jsx)(t.code,{children:"oauth"})," as the authenticator"]}),(0,r.jsx)(t.td,{children:"0.3.0"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"gravitino.authenticator.oauth.signAlgorithmType"})}),(0,r.jsx)(t.td,{children:"The signature algorithm when Gravitino uses OAuth as the authenticator."}),(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"RS256"})}),(0,r.jsxs)(t.td,{children:["Yes if use ",(0,r.jsx)(t.code,{children:"oauth"})," as the authenticator"]}),(0,r.jsx)(t.td,{children:"0.3.0"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"gravitino.authenticator.oauth.serverUri"})}),(0,r.jsx)(t.td,{children:"The URI of the default OAuth server."}),(0,r.jsx)(t.td,{children:"(none)"}),(0,r.jsxs)(t.td,{children:["Yes if use ",(0,r.jsx)(t.code,{children:"oauth"})," as the authenticator"]}),(0,r.jsx)(t.td,{children:"0.3.0"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"gravitino.authenticator.oauth.tokenPath"})}),(0,r.jsx)(t.td,{children:"The path for token of the default OAuth server."}),(0,r.jsx)(t.td,{children:"(none)"}),(0,r.jsxs)(t.td,{children:["Yes if use ",(0,r.jsx)(t.code,{children:"oauth"})," as the authenticator"]}),(0,r.jsx)(t.td,{children:"0.3.0"})]})]})]}),"\n",(0,r.jsx)(t.p,{children:"The signature algorithms that Gravitino supports follows:"}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Name"}),(0,r.jsx)(t.th,{children:"Description"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"HS256"}),(0,r.jsx)(t.td,{children:"HMAC using SHA-25A"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"HS384"}),(0,r.jsx)(t.td,{children:"HMAC using SHA-384"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"HS512"}),(0,r.jsx)(t.td,{children:"HMAC using SHA-51"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"RS256"}),(0,r.jsx)(t.td,{children:"RSASSA-PKCS-v1_5 using SHA-256"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"RS384"}),(0,r.jsx)(t.td,{children:"RSASSA-PKCS-v1_5 using SHA-384"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"RS512"}),(0,r.jsx)(t.td,{children:"RSASSA-PKCS-v1_5 using SHA-512"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"ES256"}),(0,r.jsx)(t.td,{children:"ECDSA using P-256 and SHA-256"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"ES384"}),(0,r.jsx)(t.td,{children:"ECDSA using P-384 and SHA-384"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"ES512"}),(0,r.jsx)(t.td,{children:"ECDSA using P-521 and SHA-512"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"PS256"}),(0,r.jsx)(t.td,{children:"RSASSA-PSS using SHA-256 and MGF1 with SHA-256"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"PS384"}),(0,r.jsx)(t.td,{children:"RSASSA-PSS using SHA-384 and MGF1 with SHA-384"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"PS512"}),(0,r.jsx)(t.td,{children:"RSASSA-PSS using SHA-512 and MGF1 with SHA-512"})]})]})]}),"\n",(0,r.jsx)(t.h3,{id:"example",children:"Example"}),"\n",(0,r.jsx)(t.p,{children:"You can follow the steps to set up an OAuth mode Gravitino server."}),"\n",(0,r.jsxs)(t.ol,{children:["\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsx)(t.p,{children:"Prerequisite"}),"\n",(0,r.jsx)(t.p,{children:"You need to install the JDK8 and Docker."}),"\n"]}),"\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsx)(t.p,{children:"Set up an external OAuth 2.0 server"}),"\n",(0,r.jsxs)(t.p,{children:["There is a sample-authorization-server based on ",(0,r.jsx)(t.a,{href:"https://github.com/spring-projects/spring-authorization-server/tree/1.0.3",children:"spring-authorization-server"}),"."]}),"\n",(0,r.jsx)(t.p,{children:"The image has registered a client information in the external OAuth 2.0 server."}),"\n",(0,r.jsxs)(t.p,{children:["Its clientId is ",(0,r.jsx)(t.code,{children:"test"}),". Its secret is ",(0,r.jsx)(t.code,{children:"test"}),". Its scope is ",(0,r.jsx)(t.code,{children:"test"}),"."]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-shell",children:" docker run -p 8177:8177 --name sample-auth-server -d datastrato/sample-authorization-server:0.3.0\n"})}),"\n",(0,r.jsxs)(t.ol,{start:"3",children:["\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsxs)(t.p,{children:["Open ",(0,r.jsx)(t.a,{href:"http://localhost:8177/oauth2/jwks",children:"the JWK URL of the Authorization server"})," in the browser and you can get the JWK."]}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.img,{alt:"jks_response_image",src:s(51092).Z+"",width:"2303",height:"199"})}),"\n"]}),"\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsxs)(t.p,{children:["Convert the JWK to PEM. You can use the ",(0,r.jsx)(t.a,{href:"https://8gwifi.org/jwkconvertfunctions.jsp#google_vignette",children:"online tool"})," or other tools."]}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.img,{alt:"pem_convert_result_image",src:s(70410).Z+"",width:"1530",height:"1262"})}),"\n"]}),"\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsxs)(t.p,{children:["Copy the public key and remove the character ",(0,r.jsx)(t.code,{children:"\\n"})," and you can get the default signing key of Gravitino server."]}),"\n"]}),"\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsxs)(t.p,{children:["You can refer to the ",(0,r.jsx)(t.a,{href:"/docs/next/gravitino-server-config",children:"Configurations"})," and append the configurations to the conf/gravitino.conf."]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-text",children:"gravitino.authenticator oauth\ngravitino.authenticator.oauth.serviceAudience test\ngravitino.authenticator.oauth.defaultSignKey <the default signing key>\ngravitino.authenticator.oauth.tokenPath /oauth2/token\ngravitino.authenticator.oauth.serverUri http://localhost:8177\n"})}),"\n",(0,r.jsxs)(t.ol,{start:"7",children:["\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsxs)(t.p,{children:["Open ",(0,r.jsx)(t.a,{href:"http://localhost:8090",children:"the URL of Gravitino server"})," and login in with clientId ",(0,r.jsx)(t.code,{children:"test"}),", clientSecret ",(0,r.jsx)(t.code,{children:"test"})," and scope ",(0,r.jsx)(t.code,{children:"test"}),"."]}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.img,{alt:"oauth_login_image",src:s(2523).Z+"",width:"1133",height:"1211"})}),"\n"]}),"\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsx)(t.p,{children:"You can also use curl command to access Gravitino."}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(t.p,{children:"Get access token"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-shell",children:"curl --location --request POST 'http://127.0.0.1:8177/oauth2/token?grant_type=client_credentials&client_id=test&client_secret=test&scope=test'\n"})}),"\n",(0,r.jsx)(t.p,{children:"Use the access token to request the Gravitino"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-shell",children:'curl -v -X GET -H "Accept: application/vnd.gravitino.v1+json" -H "Content-Type: application/json" -H "Authorization: Bearer <access_token>" http://localhost:8090/api/version\n'})}),"\n",(0,r.jsx)(t.h2,{id:"https",children:"HTTPS"}),"\n",(0,r.jsx)(t.p,{children:"Users would better use HTTPS instead of HTTP if users choose OAuth 2.0 as the authenticator."}),"\n",(0,r.jsx)(t.p,{children:"HTTPS protects the header of the request from smuggling, making it safer."}),"\n",(0,r.jsx)(t.p,{children:"If users choose to enable HTTPS, Gravitino won't provide the ability of HTTP service."}),"\n",(0,r.jsx)(t.p,{children:"Both Gravitino server and Iceberg REST service can configure HTTPS."}),"\n",(0,r.jsx)(t.h3,{id:"gravitino-servers-configuration",children:"Gravitino server's configuration"}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Configuration item"}),(0,r.jsx)(t.th,{children:"Description"}),(0,r.jsx)(t.th,{children:"Default value"}),(0,r.jsx)(t.th,{children:"Required"}),(0,r.jsx)(t.th,{children:"Since version"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"gravitino.server.webserver.enableHttps"})}),(0,r.jsx)(t.td,{children:"Enables HTTPS."}),(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"false"})}),(0,r.jsx)(t.td,{children:"Yes"}),(0,r.jsx)(t.td,{children:"0.3.0"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"gravitino.server.webserver.httpsPort"})}),(0,r.jsx)(t.td,{children:"The HTTPS port number of the Jetty web server."}),(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"8433"})}),(0,r.jsx)(t.td,{children:"Yes if use HTTPS"}),(0,r.jsx)(t.td,{children:"0.3.0"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"gravitino.server.webserver.keyStorePath"})}),(0,r.jsx)(t.td,{children:"Path to the key store file."}),(0,r.jsx)(t.td,{children:"(none)"}),(0,r.jsx)(t.td,{children:"Yes if use HTTPS"}),(0,r.jsx)(t.td,{children:"0.3.0"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"gravitino.server.webserver.keyStorePassword"})}),(0,r.jsx)(t.td,{children:"Password to the key store."}),(0,r.jsx)(t.td,{children:"(none)"}),(0,r.jsx)(t.td,{children:"Yes if use HTTPS"}),(0,r.jsx)(t.td,{children:"0.3.0"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"gravitino.server.webserver.keyStoreType"})}),(0,r.jsx)(t.td,{children:"The type to the key store."}),(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"JKS"})}),(0,r.jsx)(t.td,{children:"Yes if use HTTPS"}),(0,r.jsx)(t.td,{children:"0.3.0"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"gravitino.server.webserver.managerPassword"})}),(0,r.jsx)(t.td,{children:"Manager password to the key store."}),(0,r.jsx)(t.td,{children:"(none)"}),(0,r.jsx)(t.td,{children:"Yes if use HTTPS"}),(0,r.jsx)(t.td,{children:"0.3.0"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"gravitino.server.webserver.tlsProtocol"})}),(0,r.jsx)(t.td,{children:"TLS protocol to use. The JVM must support the TLS protocol to use."}),(0,r.jsx)(t.td,{children:"none"}),(0,r.jsx)(t.td,{children:"No"}),(0,r.jsx)(t.td,{children:"0.3.0"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"gravitino.server.webserver.enableCipherAlgorithms"})}),(0,r.jsx)(t.td,{children:"The collection of enabled cipher algorithms."}),(0,r.jsx)(t.td,{children:"``"}),(0,r.jsx)(t.td,{children:"Yes if use HTTPS"}),(0,r.jsx)(t.td,{children:"0.3.0"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"gravitino.server.webserver.enableClientAuth"})}),(0,r.jsx)(t.td,{children:"Enables the authentication of the client."}),(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"false"})}),(0,r.jsx)(t.td,{children:"Yes if use HTTPS"}),(0,r.jsx)(t.td,{children:"0.3.0"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"gravitino.server.webserver.trustStorePath"})}),(0,r.jsx)(t.td,{children:"Path to the trust store file."}),(0,r.jsx)(t.td,{children:"none"}),(0,r.jsx)(t.td,{children:"Yes if use HTTPS"}),(0,r.jsx)(t.td,{children:"0.3.0"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"gravitino.server.webserver.trustStorePassword"})}),(0,r.jsx)(t.td,{children:"Password to the trust store."}),(0,r.jsx)(t.td,{children:"none"}),(0,r.jsx)(t.td,{children:"Yes if use HTTPS and the authentication of client"}),(0,r.jsx)(t.td,{children:"0.3.0"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"gravitino.server.webserver.trustStoreType"})}),(0,r.jsx)(t.td,{children:"The type to the trust store."}),(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"JKS"})}),(0,r.jsx)(t.td,{children:"Yes if use HTTPS and the authentication of client"}),(0,r.jsx)(t.td,{children:"0.3.0"})]})]})]}),"\n",(0,r.jsx)(t.h3,{id:"iceberg-rest-services-configuration",children:"Iceberg REST service's configuration"}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Configuration item"}),(0,r.jsx)(t.th,{children:"Description"}),(0,r.jsx)(t.th,{children:"Default value"}),(0,r.jsx)(t.th,{children:"Required"}),(0,r.jsx)(t.th,{children:"Since version"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"gravitino.auxService.iceberg-rest.enableHttps"})}),(0,r.jsx)(t.td,{children:"Enables HTTPS."}),(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"false"})}),(0,r.jsx)(t.td,{children:"Yes"}),(0,r.jsx)(t.td,{children:"0.3.0"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"gravitino.auxService.iceberg-rest.httpsPort"})}),(0,r.jsx)(t.td,{children:"The HTTPS port number of the Jetty web server."}),(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"8433"})}),(0,r.jsx)(t.td,{children:"Yes if use HTTPS"}),(0,r.jsx)(t.td,{children:"0.3.0"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"gravitino.auxService.iceberg-rest.keyStorePath"})}),(0,r.jsx)(t.td,{children:"Path to the key store file."}),(0,r.jsx)(t.td,{children:"(none)"}),(0,r.jsx)(t.td,{children:"Yes if use HTTPS"}),(0,r.jsx)(t.td,{children:"0.3.0"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"gravitino.auxService.iceberg-rest.keyStorePassword"})}),(0,r.jsx)(t.td,{children:"Password to the key store."}),(0,r.jsx)(t.td,{children:"(none)"}),(0,r.jsx)(t.td,{children:"Yes if use HTTPS"}),(0,r.jsx)(t.td,{children:"0.3.0"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"gravitino.uxService.iceberg-rest.keyStoreType"})}),(0,r.jsx)(t.td,{children:"The type to the key store."}),(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"JKS"})}),(0,r.jsx)(t.td,{children:"Yes if use HTTPS"}),(0,r.jsx)(t.td,{children:"0.3.0"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"gravitino.auxService.iceberg-rest.managerPassword"})}),(0,r.jsx)(t.td,{children:"Manager password to the key store."}),(0,r.jsx)(t.td,{children:"(none)"}),(0,r.jsx)(t.td,{children:"Yes if use HTTPS"}),(0,r.jsx)(t.td,{children:"0.3.0"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"gravitino.auxService.iceberg-rest.tlsProtocol"})}),(0,r.jsx)(t.td,{children:"TLS protocol to use. The JVM must support the TLS protocol to use."}),(0,r.jsx)(t.td,{children:"(none)"}),(0,r.jsx)(t.td,{children:"Yes if use HTTPS"}),(0,r.jsx)(t.td,{children:"0.3.0"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"gravitino.auxService.iceberg-rest.enableCipherAlgorithms"})}),(0,r.jsx)(t.td,{children:"The collection of enabled cipher algorithms."}),(0,r.jsx)(t.td,{children:"``"}),(0,r.jsx)(t.td,{children:"No"}),(0,r.jsx)(t.td,{children:"0.3.0"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"gravitino.auxService.iceberg-rest.enableClientAuth"})}),(0,r.jsx)(t.td,{children:"Enables the authentication of the client."}),(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"false"})}),(0,r.jsx)(t.td,{children:"Yes if use HTTPS"}),(0,r.jsx)(t.td,{children:"0.3.0"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"gravitino.auxService.iceberg-rest.trustStorePath"})}),(0,r.jsx)(t.td,{children:"Path to the trust store file."}),(0,r.jsx)(t.td,{children:"(none)"}),(0,r.jsx)(t.td,{children:"Yes if use HTTPS and the authentication of client"}),(0,r.jsx)(t.td,{children:"0.3.0"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"gravitino.auxService.iceberg-rest.trustStorePassword"})}),(0,r.jsx)(t.td,{children:"Password to the trust store."}),(0,r.jsx)(t.td,{children:"(none)"}),(0,r.jsx)(t.td,{children:"Yes if use HTTPS and the authentication of client"}),(0,r.jsx)(t.td,{children:"0.3.0"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"gravitino.auxService.iceberg-rest.trustStoreType"})}),(0,r.jsx)(t.td,{children:"The type to the trust store."}),(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"JKS"})}),(0,r.jsx)(t.td,{children:"Yes if use HTTPS and the authentication of client"}),(0,r.jsx)(t.td,{children:"0.3.0"})]})]})]}),"\n",(0,r.jsxs)(t.p,{children:['Refer to the "Additional JSSE Standard Names" section of the ',(0,r.jsx)(t.a,{href:"https://docs.oracle.com/javase/8/docs/technotes/guides/security/StandardNames.html#jssenames",children:"Java security guide"})," for the list of protocols related to tlsProtocol. You can find the list of ",(0,r.jsx)(t.code,{children:"tlsProtocol"})," values for Java 8 in this document."]}),"\n",(0,r.jsxs)(t.p,{children:['Refer to the "Additional JSSE Standard Names" section of the ',(0,r.jsx)(t.a,{href:"https://docs.oracle.com/javase/8/docs/technotes/guides/security/StandardNames.html#ciphersuites",children:"Java security guide"})," for the list of protocols related to tlsProtocol. You can find the list of ",(0,r.jsx)(t.code,{children:"enableCipherAlgorithms"})," values for Java 8 in this document."]}),"\n",(0,r.jsx)(t.h3,{id:"example-1",children:"Example"}),"\n",(0,r.jsx)(t.p,{children:"You can follow the steps to set up a HTTPS server."}),"\n",(0,r.jsxs)(t.ol,{children:["\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsx)(t.p,{children:"Prerequisite"}),"\n",(0,r.jsx)(t.p,{children:"You need to install the JDK8, wget, and set the environment JAVA_HOME."}),"\n",(0,r.jsxs)(t.p,{children:["If you want to use the command ",(0,r.jsx)(t.code,{children:"curl"})," to request the Gravitino server, you should install openSSL."]}),"\n"]}),"\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsx)(t.p,{children:"Generate the key store"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-shell",children:'cd $JAVA_HOME\nbin/keytool -genkeypair  -alias localhost \\\n-keyalg RSA -keysize 4096 -keypass localhost \\\n-sigalg SHA256withRSA \\\n-keystore localhost.jks -storetype JKS -storepass localhost \\\n-dname "cn=localhost,ou=localhost,o=localhost,l=beijing,st=beijing,c=cn" \\\n-validity 36500\n'})}),"\n",(0,r.jsxs)(t.ol,{start:"3",children:["\n",(0,r.jsx)(t.li,{children:"Generate the certificate"}),"\n"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-shell",children:"bin/keytool -export -alias localhost -keystore localhost.jks -file  localhost.crt -storepass localhost\n"})}),"\n",(0,r.jsxs)(t.ol,{start:"4",children:["\n",(0,r.jsx)(t.li,{children:"Import the certificate"}),"\n"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-shell",children:"bin/keytool -import -alias localhost -keystore jre/lib/security/cacerts -file localhost.crt -storepass changeit -noprompt\n"})}),"\n",(0,r.jsxs)(t.ol,{start:"5",children:["\n",(0,r.jsxs)(t.li,{children:["You can refer to the ",(0,r.jsx)(t.a,{href:"/docs/next/gravitino-server-config",children:"Configurations"})," and append the configurations to the conf/gravitino.conf.\nConfiguration doesn't support to resolve environment variable, so you should replace ",(0,r.jsx)(t.code,{children:"${JAVA_HOME}"})," with the actual value.\nThen, You can start the Gravitino server."]}),"\n"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-text",children:"gravitino.server.webserver.host localhost\ngravitino.server.webserver.enableHttps true\ngravitino.server.webserver.keyStorePath ${JAVA_HOME}/localhost.jks\ngravitino.server.webserver.keyStorePassword localhost\ngravitino.server.webserver.managerPassword localhost\n"})}),"\n",(0,r.jsxs)(t.ol,{start:"6",children:["\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsx)(t.p,{children:"Request the Gravitino server"}),"\n",(0,r.jsx)(t.p,{children:"If you use Java, you can follow the steps"}),"\n",(0,r.jsx)(t.p,{children:"Copy the code to a file named Main.java"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-java",children:'import com.datastrato.gravitino.client.GravitinoClient;\nimport com.datastrato.gravitino.client.GravitinoVersion;\n\npublic class Main {\n    public static void main(String[] args) {\n        String uri = "https://localhost:8433";\n        GravitinoClient client = GravitinoClient.builder(uri).build();\n        GravitinoVersion gravitinoVersion = client.getVersion();\n        System.out.println(gravitinoVersion);\n    }\n}\n'})}),"\n",(0,r.jsxs)(t.p,{children:["If you want to use the command ",(0,r.jsx)(t.code,{children:"curl"}),", you can follow the commands:"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-shell",children:'openssl x509 -inform der -in $JAVA_HOME/localhost.crt -out certificate.pem\ncurl -v -X GET --cacert ./certificate.pem -H "Accept: application/vnd.gravitino.v1+json" -H "Content-Type: application/json" https://localhost:8433/api/version\n'})})]})}function a(e={}){const{wrapper:t}={...(0,n.a)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}},51092:(e,t,s)=>{s.d(t,{Z:()=>r});const r=s.p+"assets/images/jks-995eb0b7c2ca4f7f4f1e28ebae5e3144.png"},2523:(e,t,s)=>{s.d(t,{Z:()=>r});const r=s.p+"assets/images/oauth-d58a2bcf262ce077548b31413bbfcb73.png"},70410:(e,t,s)=>{s.d(t,{Z:()=>r});const r=s.p+"assets/images/pem-7d669432b13e068faef25044ce6cde3d.png"},37627:(e,t,s)=>{s.d(t,{Z:()=>c,a:()=>d});var r=s(52983);const n={},i=r.createContext(n);function d(e){const t=r.useContext(i);return r.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function c(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:d(e.components),r.createElement(i.Provider,{value:t},e.children)}}}]);